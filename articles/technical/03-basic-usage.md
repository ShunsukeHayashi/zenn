# 3. 基本的な使い方

## 3.1 ターミナルでの基本操作

### 起動と終了

**Claude Codeの起動**
```bash
# プロジェクトディレクトリで起動
cd ~/your-project
claude

# 起動時のメッセージ
Claude Code v0.1.0
Type your message or use /help for commands
Ready to assist with your project!
>
```

**対話モードとヘッドレスモード**
```bash
# 対話モード（デフォルト）
claude

# ヘッドレスモード（-pオプション）
claude -p "READMEファイルを作成してください"

# ストリーミング出力付き
claude -p "テストを実行して結果を表示" --stream
```

**終了方法**
```bash
# 以下のいずれかで終了
/exit
/quit
Ctrl+C
```

### 基本コマンド

**スラッシュコマンド一覧**
```bash
/help     # ヘルプを表示
/cost     # 現在のセッションのコストを表示
/clear    # 会話履歴をクリア
/compact  # コンテキストを圧縮
/doctor   # システム診断
/bug      # バグレポート
/save     # セッションを保存
/load     # セッションを読み込み
```

**便利なショートカット**
```bash
# 直前のコマンドを編集
↑キー

# コマンド履歴を検索
Ctrl+R

# 現在の入力をクリア
Ctrl+U

# カーソルを行頭/行末に移動
Ctrl+A / Ctrl+E
```

### コスト管理

**リアルタイムコスト追跡**
```bash
# 現在のセッションのコスト確認
/cost

# 出力例：
Session Summary:
- Duration: 15 minutes
- Input tokens: 12,543
- Output tokens: 8,921
- Estimated cost: $0.42
```

**コスト削減のテクニック**
1. **コンテキストの最適化**
   ```bash
   # 不要な会話履歴をクリア
   /clear
   
   # コンテキストを圧縮
   /compact
   ```

2. **外部ファイルの活用**
   ```bash
   # 大量の情報は外部ファイルに
   echo "詳細な仕様" > docs/specification.md
   
   # 必要時のみ参照
   claude "docs/specification.mdを参照して実装してください"
   ```

3. **効率的なプロンプト**
   ```bash
   # 非効率な例
   claude "このプロジェクトの全体構造を説明してから、
           Userモデルのバリデーションを追加して、
           テストも書いてください"
   
   # 効率的な例
   claude "Userモデルにemailのバリデーションを追加"
   ```

## 3.2 プロジェクト理解機能

### コードベース分析

**プロジェクト構造の把握**
```bash
# プロジェクト全体の概要を取得
claude "このプロジェクトの構造と主要な機能を説明してください"

# 特定のディレクトリを分析
claude "src/componentsディレクトリの役割と構成を説明してください"

# 依存関係の確認
claude "package.jsonを分析して、主要な依存関係を説明してください"
```

**実際の出力例**
```
> このプロジェクトの構造を分析してください

プロジェクト構造を分析しました：

📁 プロジェクトルート
├── 📁 src/              # ソースコード
│   ├── 📁 components/    # Reactコンポーネント
│   ├── 📁 hooks/         # カスタムフック
│   ├── 📁 utils/         # ユーティリティ関数
│   └── 📄 index.tsx      # エントリーポイント
├── 📁 tests/             # テストファイル
├── 📁 docs/              # ドキュメント
├── 📄 package.json       # 依存関係
└── 📄 tsconfig.json      # TypeScript設定

主な技術スタック：
- React 18.2.0
- TypeScript 5.0.4
- Vite 4.3.0
- Vitest (テスト)
```

### 質問応答

**コードに関する質問**
```bash
# 関数の動作を理解
claude "calculateTotalPrice関数の動作を説明してください"

# バグの原因調査
claude "なぜUserListコンポーネントが再レンダリングされ続けるのか調査してください"

# ベストプラクティスの確認
claude "このAPIの実装はRESTfulな設計に従っていますか？"
```

**アーキテクチャに関する質問**
```bash
# 設計パターンの確認
claude "このプロジェクトで使用されているデザインパターンを特定してください"

# パフォーマンス分析
claude "パフォーマンスのボトルネックになりそうな箇所を指摘してください"

# セキュリティレビュー
claude "セキュリティ上の懸念点があれば指摘してください"
```

### ナビゲーション

**ファイル検索と移動**
```bash
# 特定の機能を実装しているファイルを検索
claude "認証機能はどのファイルで実装されていますか？"

# 関連ファイルの特定
claude "UserModelに関連するすべてのファイルをリストアップしてください"

# インポートチェーンの追跡
claude "Button componentがどこで使用されているか追跡してください"
```

**効率的なナビゲーションのコツ**
1. **具体的な質問をする**
   ```bash
   # 曖昧な質問
   claude "ユーザー関連の処理はどこ？"
   
   # 具体的な質問
   claude "ユーザー登録のバリデーション処理を実装しているファイルと行番号を教えてください"
   ```

2. **コンテキストを提供する**
   ```bash
   claude "フロントエンドのユーザー登録フォームから送信されたデータを
           処理するバックエンドのエンドポイントを見つけてください"
   ```

## 3.3 コード生成と編集

### ファイル編集

**基本的な編集操作**
```bash
# 新しいファイルの作成
claude "src/components/Header.tsxを作成して、
        ナビゲーションバーを実装してください"

# 既存ファイルの編集
claude "src/utils/validation.tsにメールアドレスの
        バリデーション関数を追加してください"

# リファクタリング
claude "components/UserList.jsxをTypeScriptに変換してください"
```

**複数ファイルの同時編集**
```bash
claude "新しいTodoアプリ機能を追加してください：
        1. components/TodoList.tsxを作成
        2. hooks/useTodos.tsを作成
        3. types/todo.tsに型定義を追加
        4. App.tsxにTodoListを組み込む"
```

### コマンド実行

**開発コマンドの実行**
```bash
# テストの実行
claude "テストを実行して、失敗しているテストがあれば修正してください"

# ビルドとエラー修正
claude "プロジェクトをビルドして、型エラーがあれば修正してください"

# リンターの実行と修正
claude "ESLintを実行して、警告を修正してください"
```

**自動化スクリプトの作成**
```bash
claude "以下のタスクを自動化するスクリプトを作成してください：
        1. 型チェック
        2. リンター実行
        3. テスト実行
        4. ビルド
        すべて成功したらデプロイ可能と表示"
```

### Git操作

**基本的なGit操作**
```bash
# 変更内容の確認とコミット
claude "現在の変更内容を確認して、適切なコミットメッセージで
        コミットしてください"

# ブランチ操作
claude "feature/user-authenticationブランチを作成して、
        認証機能の実装を開始してください"

# コンフリクト解決
claude "マージコンフリクトを解決してください"
```

**高度なGit操作**
```bash
# コミット履歴の分析
claude "直近10件のコミットを分析して、
        どんな機能が追加されたか要約してください"

# リリースノート作成
claude "v1.2.0からv1.3.0までの変更を分析して、
        リリースノートを作成してください"

# PRの作成
claude "現在のブランチの変更内容をまとめて、
        プルリクエストを作成してください"
```

**Git操作のベストプラクティス**
1. **意味のあるコミットメッセージ**
   ```bash
   claude "この変更に対して、conventional commitsの
           形式でコミットメッセージを作成してください"
   ```

2. **段階的なコミット**
   ```bash
   claude "現在の変更を論理的な単位で分割して、
           複数のコミットにしてください"
   ```

3. **レビュー前の確認**
   ```bash
   claude "PRを出す前に、以下を確認してください：
           - 不要なconsole.logの削除
           - TODOコメントの確認
           - テストの追加"
   ```

---

次章では、Claude Codeのより高度な活用方法として、プロンプトエンジニアリング手法について解説します。効果的なプロンプト設計から、非プログラミングタスクへの応用まで、Claude Codeの可能性を最大限に引き出す方法を学んでいきましょう。